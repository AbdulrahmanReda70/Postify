"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[812],{3786:(e,t,s)=>{s.d(t,{A:()=>o});s(5043);var a=s(184),l=s(4625),n=s(579);const o=function(e){let{handlePostLike:t,isLiked:s,likesCount:o}=e;return(0,n.jsxs)("div",{className:"flex gap-x-1 mt-5 items-center",children:[(0,n.jsx)(l.P.div,{className:"cursor-pointer flex",onClick:t,whileTap:{scale:1.2},animate:{color:s?"white":"#ccc"},transition:{duration:.2},children:s?(0,n.jsx)(a.gb0,{fontSize:"25px"}):(0,n.jsx)(a.U2A,{fontSize:"25px"})}),(0,n.jsx)("div",{children:o})]})}},8117:(e,t,s)=>{s.d(t,{A:()=>v});var a=s(9379),l=s(5043),n=s(237),o=s(7313),i=s(2914),r=s(391),d=s(4257),c=s(8466),x=s(579);const m=function(e){let{handleAction:t}=e;return(0,x.jsxs)(n.m,{children:[(0,x.jsx)(r.A,{slots:{root:o.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.05)",marginBottom:"5px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}}}},children:(0,x.jsx)(c.A,{fontSize:"small"})}),(0,x.jsx)(i.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,s)=>(0,x.jsx)(d.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e},s)))})]})};var u=s(9778),h=s(3512);const v=function(e){let{avatar:t,username:s,date:n,body:o,likes:i=0,dislikes:r=0,loves:d=0,celebrates:c=0,commentId:v,postId:p,auth_reacted:j}=e;const[f,g]=(0,l.useState)(null),[b,k]=(0,l.useState)({like:i,dislike:r,love:d,celebrate:c}),A=(0,h.A)("(max-width: 768px)"),y={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},N=(0,l.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,l.useEffect)((()=>{k({like:i,dislike:r,love:d,celebrate:c}),g(j?N[j]:null)}),[i,r,d,c,j,N]),(0,x.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[A?null:(0,x.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,x.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,x.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,x.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"google.com",children:s})}),(0,x.jsxs)("div",{className:"text-[#9198a1]",children:[" ",n]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,x.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:o}),(0,x.jsxs)("div",{children:[(0,x.jsx)(m,{handleAction:async function(e){const t=f,s=y[e],l=t===e?null:e;g(l);try{await u.A.patch("posts/".concat(p,"/comments/").concat(v,"/reactions"),{type:s}),k((e=>{const n=(0,a.A)({},e);if(t){const e=y[t];n[e]=Math.max(0,n[e]-1)}return l&&(n[s]=parseInt(n[s]||0)+1),n}))}catch(n){g(t),console.error("Error handling reaction:",n)}}}),(0,x.jsx)("div",{className:"flex gap-x-2",children:Object.entries(b).map((e=>{let[t,s]=e;return(0,x.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(f===N[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,x.jsx)("div",{children:N[t]}),(0,x.jsx)("div",{children:s})]},t)}))})]})]})]})]})}},8159:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(8117),l=s(619),n=s(579);const o=function(e){let{comments:t,addComment:s}=e;return t?t&&0!==t.length?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(l.A,{onAddComment:s}),t.map((e=>{var t,s,l,o,i,r;return(0,n.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(s=e.dislikes)&&void 0!==s?s:0,celebrates:null!==(l=e.celebrates)&&void 0!==l?l:0,loves:null!==(o=e.loves)&&void 0!==o?o:0,avatar:(null===(i=e.user)||void 0===i?void 0:i.avatar)||"/default-avatar.png",username:(null===(r=e.user)||void 0===r?void 0:r.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(l.A,{onAddComment:s}),(0,n.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,n.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043);s.p;var l=s(7291),n=s(7295),o=s(3512),i=s(579);const r=function(e){let{onAddComment:t}=e;const[s,r]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),x=JSON.parse(localStorage.getItem("user")),m=(0,o.A)("(max-width: 768px)");return(0,i.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[m?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,i.jsx)("img",{src:null===x||void 0===x?void 0:x.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)(l.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px"},placeholder:"Write a Comment...",variant:"outlined",value:s,onChange:e=>r(e.target.value)}),(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)(n.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){c(!0),await t(s),r(""),c(!1)},children:d?"Submitting...":"Comment"})})]})]})}},956:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(9379),l=s(5043),n=s(3216),o=s(4268),i=s(8185),r=s(9778),d=s(8159),c=s(3786),x=s(579);const m=function(){const{id:e}=(0,n.g)(),[t,s]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),[h,v]=(0,l.useState)(!1),[p,j]=(0,l.useState)(0),f=JSON.parse(localStorage.getItem("user"));return(0,l.useEffect)((()=>{!async function(){try{const t=await r.A.get("posts/".concat(e));s(t.data.post),u(t.data.comments),v(t.data.post.liked),j(t.data.post.likes_count)}catch(t){console.error("Error fetching post:",t)}}()}),[e]),t?(0,x.jsxs)("div",{className:"container-c",children:[(0,x.jsx)("div",{children:(0,x.jsx)(o.A,{value:null===t||void 0===t?void 0:t.title,disabled:!0,placeholder:"Title",className:"h-[100px] text-4xl mt-7 mb-[30px] pb-[20px]"})}),t.image_url&&(0,x.jsx)("div",{className:"flex justify-center mb-8",children:(0,x.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:null===t||void 0===t?void 0:t.image_url,alt:"img"})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.A,{disabled:!0,value:null===t||void 0===t?void 0:t.body,placeholder:"Tell Your Story",className:"text-2xl"})}),(0,x.jsx)("div",{children:(0,x.jsx)(o.A,{disabled:!0,value:null===t||void 0===t?void 0:t.body,placeholder:"Tell Your Story",className:"text-2xl"})}),(0,x.jsx)(c.A,{handlePostLike:async function(){const e=t.id;v((e=>!e));try{(await r.A.post("posts/".concat(e,"/like"))).data.liked?(v(!0),j((e=>e+1))):(v(!1),j((e=>Math.max(e-1,0))))}catch(s){console.log("Error:",s)}},isLiked:h,likesCount:p}),(0,x.jsx)(d.A,{comments:m,addComment:async function(t){if(t.trim())try{const s=await r.A.post("posts/".concat(e,"/comments"),{body:t}),l=(0,a.A)((0,a.A)({},s.data.comment),{},{user:{id:f.id,username:f.username,avatar:f.avatar}});console.log("New comment added:",l),u((e=>[...e,l]))}catch(s){console.error("Error adding comment:",s)}}})]}):(0,x.jsxs)("div",{className:"container-c",children:[(0,x.jsx)(i.A,{variant:"rectangular",style:{height:"50px",marginBottom:"50px"}}),(0,x.jsx)(i.A,{variant:"rectangular",style:{height:"300px"}})]})}}}]);
//# sourceMappingURL=812.0a1ba44f.chunk.js.map