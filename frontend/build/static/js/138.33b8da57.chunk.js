"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[138],{138:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var a=s(5043),o=s(3216),r=s(4268),n=s(4458),i=s(1906),l=s(5534),c=s(9347),d=s(9379),u=s(45),p=s(8387),x=s(8610),m=s(4535),h=s(6262),g=s(8206),f=s(2532),v=s(552);function A(e){return(0,v.Ay)("MuiDialogContent",e)}(0,f.A)("MuiDialogContent",["root","dividers"]);function j(e){return(0,v.Ay)("MuiDialogTitle",e)}const b=(0,f.A)("MuiDialogTitle",["root"]);var w=s(579);const y=["className","dividers"],C=(0,m.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dividers&&t.dividers]}})((0,h.A)((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(b.root," + &")]:{paddingTop:0}}}]}}))),N=a.forwardRef((function(e,t){const s=(0,g.b)({props:e,name:"MuiDialogContent"}),{className:a,dividers:o=!1}=s,r=(0,u.A)(s,y),n=(0,d.A)((0,d.A)({},s),{},{dividers:o}),i=(e=>{const{classes:t,dividers:s}=e,a={root:["root",s&&"dividers"]};return(0,x.A)(a,A,t)})(n);return(0,w.jsx)(C,(0,d.A)({className:(0,p.A)(i.root,a),ownerState:n,ref:t},r))}));var S=s(1542),D=s(5865);function T(e){return(0,v.Ay)("MuiDialogContentText",e)}(0,f.A)("MuiDialogContentText",["root"]);const k=["children","className"],M=(0,m.Ay)(D.A,{shouldForwardProp:e=>(0,S.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),R=a.forwardRef((function(e,t){const s=(0,g.b)({props:e,name:"MuiDialogContentText"}),{children:a,className:o}=s,r=(0,u.A)(s,k),n=(e=>{const{classes:t}=e,s=(0,x.A)({root:["root"]},T,t);return(0,d.A)((0,d.A)({},t),s)})(r);return(0,w.jsx)(M,(0,d.A)((0,d.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:r,className:(0,p.A)(n.root,o)},s),{},{classes:n}))}));var P=s(2563);const O=["className","id"],U=(0,m.Ay)(D.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),_=a.forwardRef((function(e,t){const s=(0,g.b)({props:e,name:"MuiDialogTitle"}),{className:o,id:r}=s,n=(0,u.A)(s,O),i=s,l=(e=>{const{classes:t}=e;return(0,x.A)({root:["root"]},j,t)})(i),{titleId:c=r}=a.useContext(P.A);return(0,w.jsx)(U,(0,d.A)({component:"h2",className:(0,p.A)(l.root,o),ownerState:i,ref:t,variant:"h6",id:null!==r&&void 0!==r?r:c},n))})),z=e=>{let{title:t,content:s,open:a,onClose:o,onConfirm:r}=e;return(0,w.jsxs)(l.A,{open:a,onClose:o,children:[(0,w.jsx)(_,{children:t}),(0,w.jsx)(N,{children:(0,w.jsx)(R,{children:s})}),(0,w.jsxs)(c.A,{children:[(0,w.jsx)(i.A,{onClick:o,children:"Cancel"}),(0,w.jsx)(i.A,{onClick:r,autoFocus:!0,children:"Confirm"})]})]})};var F=s(7196),I=s(8185),L=s(4625),E=s(2716),Y=s(9778);const B=function(){const[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[m,h]=a.useState(!1),[g,f]=(0,a.useState)(!1),[v,A]=(0,a.useState)(null),[j,b]=(0,a.useState)(null),[y,C]=(0,a.useState)(null),{updatePost:N,allPosts:S}=(0,E.j)(),D=(0,o.zy)().state.from||"/",T=(0,o.Zp)();function k(){h(!1)}const M=(0,o.g)().id;return(0,a.useEffect)((()=>{!async function(){let e=await Y.A.get("user/posts/".concat(M));t(e.data.title),i(e.data.body),b(e.data.image),A(e.data.likes_count),c(!1),e.data.liked?f(!0):f(!1)}()}),[M]),l?(0,w.jsxs)("div",{className:"container-c",children:[(0,w.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,w.jsx)(I.A,{variant:"rectangular",width:80,height:40,className:"rounded"}),(0,w.jsx)(I.A,{variant:"rectangular",className:"rounded",width:80,height:40})]}),(0,w.jsx)(I.A,{variant:"rectangular",height:50,className:"mb-[50px]"}),(0,w.jsx)(I.A,{variant:"rectangular",height:300})]}):(0,w.jsxs)("div",{children:[(0,w.jsx)(z,{open:m,onClose:k,title:"Confirm Deletion",content:"Are you sure you want to delete this post? Once deleted, it cannot be recovered.",onConfirm:async function(){k();let e=await Y.A.delete("posts/".concat(M));e.error?x({error:!0,message:e.message}):(x({error:!1,message:e.data.message}),setTimeout((()=>{T(D,{replace:!0})}),1200)),u(!0)}}),(0,w.jsx)(n.A,{message:"Post created successfully",is_open:d,setIs_open:u,status:p}),(0,w.jsxs)("div",{className:"container-c",children:[(0,w.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,w.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,w.jsx)("input",{type:"file",className:"hidden",onChange:e=>{b(e.target.files[0]),C(URL.createObjectURL(e.target.files[0]))}})]}),(0,w.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,w.jsx)("button",{onClick:function(){h(!0)},className:"bg-red-500 flex ",children:"Delete"}),(0,w.jsx)("button",{onClick:async function(){let t=new FormData;t.append("title",e),t.append("body",s),t.append("_method","PATCH"),(j||y)&&t.append("image",j);let a=await Y.A.post("posts/".concat(M),t);if(a.error)x({error:!0,message:a.message});else{const e=a.data.post;N(e),x({error:!1,message:a.data.message})}u(!0)},className:"bg-green flex ",children:"Update"})]}),(0,w.jsx)("div",{children:(0,w.jsx)(r.A,{value:e,onChange:e=>t(e.target.value),placeholder:"Title",className:"w-[600px] h-[100px] text-5xl mb-[30px] pb-[20px] "})}),(0,w.jsx)("div",{className:"flex justify-center mb-8",children:(0,w.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:y||"http://localhost:8000/storage/".concat(j),alt:"img"})}),(0,w.jsx)("div",{children:(0,w.jsx)(r.A,{value:s,onChange:e=>i(e.target.value),placeholder:"Tell Your Story",className:"w-[600px]  text-2xl"})}),(0,w.jsxs)("div",{className:"flex gap-x-1 mt-5 items-end",children:[(0,w.jsx)(L.P.div,{className:"cursor-pointer flex",onClick:async function(){f((e=>!e));try{(await Y.A.post("posts/".concat(M,"/like"))).data.liked?(f(!0),A((e=>e+1))):(f(!1),A((e=>Math.max(e-1,0))))}catch(e){console.log("Error:",e)}},whileTap:{scale:1.2},animate:{color:g?"#ff2e63":"#ccc"},transition:{duration:.2},children:g?(0,w.jsx)(F.ObQ,{fontSize:"28px"}):(0,w.jsx)(F.fLg,{fontSize:"28px"})}),(0,w.jsx)("div",{children:v})]})]})]})}}}]);
//# sourceMappingURL=138.33b8da57.chunk.js.map