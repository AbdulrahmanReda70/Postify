"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[738],{3786:(e,t,s)=>{s.d(t,{A:()=>r});s(5043);var a=s(184),o=s(4625),n=s(579);const r=function(e){let{handlePostLike:t,isLiked:s,likesCount:r}=e;return(0,n.jsxs)("div",{className:"flex gap-x-1 mt-5 items-center",children:[(0,n.jsx)(o.P.div,{className:"cursor-pointer flex",onClick:t,whileTap:{scale:1.2},animate:{color:s?"white":"#ccc"},transition:{duration:.2},children:s?(0,n.jsx)(a.gb0,{fontSize:"25px"}):(0,n.jsx)(a.U2A,{fontSize:"25px"})}),(0,n.jsx)("div",{children:r})]})}},8117:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(9379),o=s(5043),n=s(237),r=s(7313),l=s(2914),i=s(391),c=s(4257),d=s(8466),u=s(579);const x=function(e){let{handleAction:t}=e;return(0,u.jsxs)(n.m,{children:[(0,u.jsx)(i.A,{slots:{root:r.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.05)",marginBottom:"5px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}}}},children:(0,u.jsx)(d.A,{fontSize:"small"})}),(0,u.jsx)(l.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,s)=>(0,u.jsx)(c.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e},s)))})]})};var m=s(9778),p=s(3512);const h=function(e){let{avatar:t,username:s,date:n,body:r,likes:l=0,dislikes:i=0,loves:c=0,celebrates:d=0,commentId:h,postId:v,auth_reacted:f}=e;const[g,j]=(0,o.useState)(null),[A,b]=(0,o.useState)({like:l,dislike:i,love:c,celebrate:d}),y=(0,p.A)("(max-width: 768px)"),w={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},N=(0,o.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,o.useEffect)((()=>{b({like:l,dislike:i,love:c,celebrate:d}),j(f?N[f]:null)}),[l,i,c,d,f,N]),(0,u.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[y?null:(0,u.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,u.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,u.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,u.jsx)("div",{children:(0,u.jsx)("a",{href:"google.com",children:s})}),(0,u.jsxs)("div",{className:"text-[#9198a1]",children:[" ",n]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,u.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:r}),(0,u.jsxs)("div",{children:[(0,u.jsx)(x,{handleAction:async function(e){const t=g,s=w[e],o=t===e?null:e;j(o);try{await m.A.patch("posts/".concat(v,"/comments/").concat(h,"/reactions"),{type:s}),b((e=>{const n=(0,a.A)({},e);if(t){const e=w[t];n[e]=Math.max(0,n[e]-1)}return o&&(n[s]=parseInt(n[s]||0)+1),n}))}catch(n){j(t),console.error("Error handling reaction:",n)}}}),(0,u.jsx)("div",{className:"flex gap-x-2",children:Object.entries(A).map((e=>{let[t,s]=e;return(0,u.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(g===N[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,u.jsx)("div",{children:N[t]}),(0,u.jsx)("div",{children:s})]},t)}))})]})]})]})]})}},8159:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(8117),o=s(619),n=s(579);const r=function(e){let{comments:t,addComment:s}=e;return t?t&&0!==t.length?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(o.A,{onAddComment:s}),t.map((e=>{var t,s,o,r,l,i;return(0,n.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(s=e.dislikes)&&void 0!==s?s:0,celebrates:null!==(o=e.celebrates)&&void 0!==o?o:0,loves:null!==(r=e.loves)&&void 0!==r?r:0,avatar:(null===(l=e.user)||void 0===l?void 0:l.avatar)||"/default-avatar.png",username:(null===(i=e.user)||void 0===i?void 0:i.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(o.A,{onAddComment:s}),(0,n.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,n.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);s.p;var o=s(7291),n=s(7295),r=s(3512),l=s(579);const i=function(e){let{onAddComment:t}=e;const[s,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),u=JSON.parse(localStorage.getItem("user")),x=(0,r.A)("(max-width: 768px)");return(0,l.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[x?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,l.jsx)("img",{src:null===u||void 0===u?void 0:u.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(o.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px"},placeholder:"Write a Comment...",variant:"outlined",value:s,onChange:e=>i(e.target.value)}),(0,l.jsx)("div",{className:"flex justify-end mt-2",children:(0,l.jsx)(n.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await t(s),i(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},138:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var a=s(9379),o=s(5043),n=s(3216),r=s(4268),l=s(4458),i=s(1906),c=s(5534),d=s(9347),u=s(45),x=s(8387),m=s(8610),p=s(4535),h=s(6262),v=s(8206),f=s(2532),g=s(552);function j(e){return(0,g.Ay)("MuiDialogContent",e)}(0,f.A)("MuiDialogContent",["root","dividers"]);function A(e){return(0,g.Ay)("MuiDialogTitle",e)}const b=(0,f.A)("MuiDialogTitle",["root"]);var y=s(579);const w=["className","dividers"],N=(0,p.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dividers&&t.dividers]}})((0,h.A)((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(b.root," + &")]:{paddingTop:0}}}]}}))),C=o.forwardRef((function(e,t){const s=(0,v.b)({props:e,name:"MuiDialogContent"}),{className:o,dividers:n=!1}=s,r=(0,u.A)(s,w),l=(0,a.A)((0,a.A)({},s),{},{dividers:n}),i=(e=>{const{classes:t,dividers:s}=e,a={root:["root",s&&"dividers"]};return(0,m.A)(a,j,t)})(l);return(0,y.jsx)(N,(0,a.A)({className:(0,x.A)(i.root,o),ownerState:l,ref:t},r))}));var k=s(1542),S=s(5865);function D(e){return(0,g.Ay)("MuiDialogContentText",e)}(0,f.A)("MuiDialogContentText",["root"]);const T=["children","className"],M=(0,p.Ay)(S.A,{shouldForwardProp:e=>(0,k.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),R=o.forwardRef((function(e,t){const s=(0,v.b)({props:e,name:"MuiDialogContentText"}),{children:o,className:n}=s,r=(0,u.A)(s,T),l=(e=>{const{classes:t}=e,s=(0,m.A)({root:["root"]},D,t);return(0,a.A)((0,a.A)({},t),s)})(r);return(0,y.jsx)(M,(0,a.A)((0,a.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:r,className:(0,x.A)(l.root,n)},s),{},{classes:l}))}));var I=s(2563);const P=["className","id"],_=(0,p.Ay)(S.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),L=o.forwardRef((function(e,t){const s=(0,v.b)({props:e,name:"MuiDialogTitle"}),{className:n,id:r}=s,l=(0,u.A)(s,P),i=s,c=(e=>{const{classes:t}=e;return(0,m.A)({root:["root"]},A,t)})(i),{titleId:d=r}=o.useContext(I.A);return(0,y.jsx)(_,(0,a.A)({component:"h2",className:(0,x.A)(c.root,n),ownerState:i,ref:t,variant:"h6",id:null!==r&&void 0!==r?r:d},l))})),z=e=>{let{title:t,content:s,open:a,onClose:o,onConfirm:n}=e;return(0,y.jsxs)(c.A,{open:a,onClose:o,children:[(0,y.jsx)(L,{children:t}),(0,y.jsx)(C,{children:(0,y.jsx)(R,{children:s})}),(0,y.jsxs)(d.A,{children:[(0,y.jsx)(i.A,{onClick:o,children:"Cancel"}),(0,y.jsx)(i.A,{onClick:n,autoFocus:!0,children:"Confirm"})]})]})};var O=s(8185),E=s(2716),U=s(9778),F=s(3786),B=s(8159);const W=function(){var e;const[t,s]=(0,o.useState)(""),[i,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(!0),[x,m]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[v,f]=o.useState(!1),[g,j]=(0,o.useState)(!1),[A,b]=(0,o.useState)(null),w=JSON.parse(localStorage.getItem("user")),[N,C]=(0,o.useState)(null),[k,S]=(0,o.useState)(null),[D,T]=(0,o.useState)([]),{updatePost:M,allPosts:R}=(0,E.j)(),I=(0,n.zy)(),P=(null===I||void 0===I||null===(e=I.state)||void 0===e?void 0:e.from)||"/",_=(0,n.Zp)();function L(){f(!1)}const W=(0,n.g)().id;return(0,o.useEffect)((()=>{!async function(){let e=await U.A.get("posts/".concat(W));console.log("Post data:",e.data),s(e.data.post.title),c(e.data.post.body),C(e.data.post.image_url),T(e.data.comments),b(e.data.post.likes_count),u(!1),e.data.post.liked?j(!0):j(!1)}()}),[W]),d?(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)(O.A,{variant:"rectangular",width:80,height:40,className:"rounded"}),(0,y.jsx)(O.A,{variant:"rectangular",className:"rounded",width:80,height:40})]}),(0,y.jsx)(O.A,{variant:"rectangular",height:50,className:"mb-[50px]"}),(0,y.jsx)(O.A,{variant:"rectangular",height:300})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(z,{open:v,onClose:L,title:"Confirm Deletion",content:"Are you sure you want to delete this post? Once deleted, it cannot be recovered.",onConfirm:async function(){L();let e=await U.A.delete("posts/".concat(W));e.error?h({error:!0,message:e.message}):(h({error:!1,message:e.data.message}),setTimeout((()=>{_(P,{replace:!0})}),1200)),m(!0)}}),(0,y.jsx)(l.A,{message:"Post created successfully",is_open:x,setIs_open:m,status:p}),(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,y.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,y.jsx)("input",{type:"file",className:"hidden",onChange:e=>{C(e.target.files[0]),S(URL.createObjectURL(e.target.files[0]))}})]}),(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)("button",{onClick:function(){f(!0)},className:"bg-red-500 flex ",children:"Delete"}),(0,y.jsx)("button",{onClick:async function(){let e=new FormData;e.append("title",t),e.append("body",i),e.append("_method","PATCH"),(N||k)&&e.append("image",N);let s=await U.A.post("posts/".concat(W),e);if(s.error)h({error:!0,message:s.message});else{const e=s.data.post;M(e),h({error:!1,message:s.data.message})}m(!0)},className:"bg-green flex ",children:"Update"})]}),(0,y.jsx)("div",{children:(0,y.jsx)(r.A,{value:t,onChange:e=>s(e.target.value),placeholder:"Title",className:"w-full h-[100px] text-5xl mb-[30px] pb-[20px] "})}),N&&(0,y.jsx)("div",{className:"flex justify-center mb-8",children:(0,y.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:k||N,alt:"img"})}),(0,y.jsx)("div",{children:(0,y.jsx)(r.A,{value:i,onChange:e=>c(e.target.value),placeholder:"Tell Your Story",className:"w-full text-2xl"})}),(0,y.jsx)(F.A,{handlePostLike:async function(){j((e=>!e));try{(await U.A.post("posts/".concat(W,"/like"))).data.liked?(j(!0),b((e=>e+1))):(j(!1),b((e=>Math.max(e-1,0))))}catch(e){console.log("Error:",e)}},isLiked:g,likesCount:A}),(0,y.jsx)(B.A,{comments:D,addComment:async function(e){if(e.trim())try{const t=await U.A.post("posts/".concat(W,"/comments"),{body:e}),s=(0,a.A)((0,a.A)({},t.data.comment),{},{user:{id:w.id,username:w.username,avatar:w.avatar}});console.log("New comment added:",s),T((e=>[...e,s]))}catch(t){console.error("Error adding comment:",t)}}})]})]})}}}]);
//# sourceMappingURL=738.e29a7928.chunk.js.map