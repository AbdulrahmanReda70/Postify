"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[812],{3786:(e,t,s)=>{s.d(t,{A:()=>n});s(5043);var a=s(184),l=s(4625),o=s(579);const n=function(e){let{handlePostLike:t,isLiked:s,likesCount:n}=e;return(0,o.jsxs)("div",{className:"flex gap-x-1 mt-5 items-center",children:[(0,o.jsx)(l.P.div,{className:"cursor-pointer flex",onClick:t,whileTap:{scale:1.2},animate:{color:s?"white":"#ccc"},transition:{duration:.2},children:s?(0,o.jsx)(a.gb0,{fontSize:"25px"}):(0,o.jsx)(a.U2A,{fontSize:"25px"})}),(0,o.jsx)("div",{children:n})]})}},8117:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(9379),l=s(5043),o=s(237),n=s(7313),r=s(2914),i=s(391),c=s(4257),d=s(8466),x=s(579);const m=function(e){let{handleAction:t}=e;const s="#23272f",a="#ffd369";return(0,x.jsxs)(o.m,{children:[(0,x.jsx)(i.A,{slots:{root:n.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"#222831",marginBottom:"5px",color:a,boxShadow:"0 2px 8px rgba(0,0,0,0.15)","&:hover":{backgroundColor:"#393e46"}}}},children:(0,x.jsx)(d.A,{fontSize:"small",sx:{color:a}})}),(0,x.jsx)(r.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px",backgroundColor:s,boxShadow:"0 2px 12px rgba(0,0,0,0.25)"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,l)=>(0,x.jsx)(c.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px",backgroundColor:s,color:a,"&:hover":{backgroundColor:"#393e46"}},children:e},l)))})]})};var u=s(9778),h=s(3512);const p=function(e){let{avatar:t,username:s,date:o,body:n,likes:r=0,dislikes:i=0,loves:c=0,celebrates:d=0,commentId:p,postId:v,auth_reacted:f}=e;const[j,g]=(0,l.useState)(null),[b,k]=(0,l.useState)({like:r,dislike:i,love:c,celebrate:d}),A=(0,h.A)("(max-width: 768px)"),y={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},N=(0,l.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,l.useEffect)((()=>{k({like:r,dislike:i,love:c,celebrate:d}),g(f?N[f]:null)}),[r,i,c,d,f,N]),(0,x.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[A?null:(0,x.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,x.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,x.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,x.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"google.com",children:s})}),(0,x.jsxs)("div",{className:"text-[#9198a1]",children:[" ",o]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,x.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:n}),(0,x.jsxs)("div",{children:[(0,x.jsx)(m,{handleAction:async function(e){const t=j,s=y[e],l=t===e?null:e;g(l);try{await u.A.patch("posts/".concat(v,"/comments/").concat(p,"/reactions"),{type:s}),k((e=>{const o=(0,a.A)({},e);if(t){const e=y[t];o[e]=Math.max(0,o[e]-1)}return l&&(o[s]=parseInt(o[s]||0)+1),o}))}catch(o){g(t),console.error("Error handling reaction:",o)}}}),(0,x.jsx)("div",{className:"flex gap-x-2",children:Object.entries(b).map((e=>{let[t,s]=e;return(0,x.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(j===N[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,x.jsx)("div",{children:N[t]}),(0,x.jsx)("div",{children:s})]},t)}))})]})]})]})]})}},8159:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(8117),l=s(619),o=s(579);const n=function(e){let{comments:t,addComment:s}=e;return t?t&&0!==t.length?(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,o.jsx)(l.A,{onAddComment:s}),t.map((e=>{var t,s,l,n,r,i;return(0,o.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(s=e.dislikes)&&void 0!==s?s:0,celebrates:null!==(l=e.celebrates)&&void 0!==l?l:0,loves:null!==(n=e.loves)&&void 0!==n?n:0,avatar:(null===(r=e.user)||void 0===r?void 0:r.avatar)||"/default-avatar.png",username:(null===(i=e.user)||void 0===i?void 0:i.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,o.jsx)(l.A,{onAddComment:s}),(0,o.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,o.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);s.p;var l=s(7291),o=s(7295),n=s(3512),r=s(579);const i=function(e){let{onAddComment:t}=e;const[s,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),x=JSON.parse(localStorage.getItem("user")),m=(0,n.A)("(max-width: 768px)");return(0,r.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[m?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,r.jsx)("img",{src:null===x||void 0===x?void 0:x.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(l.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px",color:"white"},placeholder:"Write a Comment...",variant:"outlined",value:s,onChange:e=>i(e.target.value)}),(0,r.jsx)("div",{className:"flex justify-end mt-2",children:(0,r.jsx)(o.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await t(s),i(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},956:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(9379),l=s(5043),o=s(3216),n=s(4268),r=s(8185),i=s(9778),c=s(8159),d=s(3786),x=s(579);const m=function(){const{id:e}=(0,o.g)(),[t,s]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[v,f]=(0,l.useState)(0),j=JSON.parse(localStorage.getItem("user"));return(0,l.useEffect)((()=>{!async function(){try{const t=await i.A.get("posts/".concat(e));s(t.data.post),u(t.data.comments),p(t.data.post.liked),f(t.data.post.likes_count)}catch(t){console.error("Error fetching post:",t)}}()}),[e]),t?(0,x.jsxs)("div",{className:"container-c",children:[(0,x.jsx)("div",{children:(0,x.jsx)(n.A,{value:null===t||void 0===t?void 0:t.title,disabled:!0,placeholder:"Title",className:"h-[100px] text-4xl mt-7 mb-[30px] pb-[20px]"})}),t.image_url&&(0,x.jsx)("div",{className:"flex justify-center mb-8",children:(0,x.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:null===t||void 0===t?void 0:t.image_url,alt:"img"})}),(0,x.jsx)("div",{children:(0,x.jsx)(n.A,{disabled:!0,value:null===t||void 0===t?void 0:t.body,placeholder:"Tell Your Story",className:"text-2xl"})}),(0,x.jsx)("div",{children:(0,x.jsx)(n.A,{disabled:!0,value:null===t||void 0===t?void 0:t.body,placeholder:"Tell Your Story",className:"text-2xl"})}),(0,x.jsx)(d.A,{handlePostLike:async function(){const e=t.id;p((e=>!e));try{(await i.A.post("posts/".concat(e,"/like"))).data.liked?(p(!0),f((e=>e+1))):(p(!1),f((e=>Math.max(e-1,0))))}catch(s){console.log("Error:",s)}},isLiked:h,likesCount:v}),(0,x.jsx)(c.A,{comments:m,addComment:async function(t){if(t.trim())try{const s=await i.A.post("posts/".concat(e,"/comments"),{body:t}),l=(0,a.A)((0,a.A)({},s.data.comment),{},{user:{id:j.id,username:j.username,avatar:j.avatar}});console.log("New comment added:",l),u((e=>[...e,l]))}catch(s){console.error("Error adding comment:",s)}}})]}):(0,x.jsxs)("div",{className:"container-c",children:[(0,x.jsx)(r.A,{variant:"rectangular",style:{height:"50px",marginBottom:"50px"}}),(0,x.jsx)(r.A,{variant:"rectangular",style:{height:"300px"}})]})}}}]);
//# sourceMappingURL=812.c8330ef8.chunk.js.map