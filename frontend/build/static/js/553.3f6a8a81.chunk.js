"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[553],{8117:(e,s,t)=>{t.d(s,{A:()=>p});var a=t(9379),l=t(5043),r=t(237),o=t(7313),n=t(2914),i=t(391),c=t(4257),d=t(8466),x=t(579);const m=function(e){let{handleAction:s}=e;const t="#23272f",a="#ffd369";return(0,x.jsxs)(r.m,{children:[(0,x.jsx)(i.A,{slots:{root:o.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"#222831",marginBottom:"5px",color:a,boxShadow:"0 2px 8px rgba(0,0,0,0.15)","&:hover":{backgroundColor:"#393e46"}}}},children:(0,x.jsx)(d.A,{fontSize:"small",sx:{color:a}})}),(0,x.jsx)(n.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px",backgroundColor:t,boxShadow:"0 2px 12px rgba(0,0,0,0.25)"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,l)=>(0,x.jsx)(c.A,{onClick:()=>s(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px",backgroundColor:t,color:a,"&:hover":{backgroundColor:"#393e46"}},children:e},l)))})]})};var u=t(9778),h=t(3512);const p=function(e){let{avatar:s,username:t,date:r,body:o,likes:n=0,dislikes:i=0,loves:c=0,celebrates:d=0,commentId:p,postId:v,auth_reacted:g}=e;const[b,f]=(0,l.useState)(null),[j,y]=(0,l.useState)({like:n,dislike:i,love:c,celebrate:d}),w=(0,h.A)("(max-width: 768px)"),N={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},k=(0,l.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,l.useEffect)((()=>{y({like:n,dislike:i,love:c,celebrate:d}),f(g?k[g]:null)}),[n,i,c,d,g,k]),(0,x.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[w?null:(0,x.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,x.jsx)("img",{src:s,alt:"avatar",className:"w-full h-full object-cover"})}),(0,x.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,x.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"google.com",children:t})}),(0,x.jsxs)("div",{className:"text-[#9198a1]",children:[" ",r]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,x.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:o}),(0,x.jsxs)("div",{children:[(0,x.jsx)(m,{handleAction:async function(e){const s=b,t=N[e],l=s===e?null:e;f(l);try{await u.A.patch("posts/".concat(v,"/comments/").concat(p,"/reactions"),{type:t}),y((e=>{const r=(0,a.A)({},e);if(s){const e=N[s];r[e]=Math.max(0,r[e]-1)}return l&&(r[t]=parseInt(r[t]||0)+1),r}))}catch(r){f(s),console.error("Error handling reaction:",r)}}}),(0,x.jsx)("div",{className:"flex gap-x-2",children:Object.entries(j).map((e=>{let[s,t]=e;return(0,x.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(b===k[s]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,x.jsx)("div",{children:k[s]}),(0,x.jsx)("div",{children:t})]},s)}))})]})]})]})]})}},8159:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(8117),l=t(619),r=t(579);const o=function(e){let{comments:s,addComment:t}=e;return s?s&&0!==s.length?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,r.jsx)(l.A,{onAddComment:t}),s.map((e=>{var s,t,l,o,n,i;return(0,r.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(s=e.likes)&&void 0!==s?s:0,dislikes:null!==(t=e.dislikes)&&void 0!==t?t:0,celebrates:null!==(l=e.celebrates)&&void 0!==l?l:0,loves:null!==(o=e.loves)&&void 0!==o?o:0,avatar:(null===(n=e.user)||void 0===n?void 0:n.avatar)||"/default-avatar.png",username:(null===(i=e.user)||void 0===i?void 0:i.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,r.jsx)(l.A,{onAddComment:t}),(0,r.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043);t.p;var l=t(7291),r=t(7295),o=t(3512),n=t(579);const i=function(e){let{onAddComment:s}=e;const[t,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),x=JSON.parse(localStorage.getItem("user")),m=(0,o.A)("(max-width: 768px)");return(0,n.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[m?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,n.jsx)("img",{src:null===x||void 0===x?void 0:x.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(l.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px",color:"white"},placeholder:"Write a Comment...",variant:"outlined",value:t,onChange:e=>i(e.target.value)}),(0,n.jsx)("div",{className:"flex justify-end mt-2",children:(0,n.jsx)(r.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await s(t),i(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},4477:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(5043),l=t(4268),r=t(9778),o=t(4458),n=(t(2716),t(3216)),i=(t(619),t(8117),t(8159),t(579));const c=function(){const[e,s]=(0,a.useState)(""),[t,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[v,g]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),j=(0,n.Zp)();return(0,i.jsxs)("div",{children:[(0,i.jsx)(o.A,{is_open:m,setIs_open:u,status:h}),(0,i.jsxs)("div",{className:"container-c",children:[(0,i.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300 ".concat(b?"opacity-50 cursor-not-allowed":""),children:[(0,i.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,i.jsx)("input",{type:"file",className:"hidden",disabled:b,onChange:e=>{x(e.target.files[0]),g(URL.createObjectURL(e.target.files[0]))}})]}),(0,i.jsx)("button",{onClick:async function(){if(!b){f(!0);try{const s=new FormData;s.append("title",e),s.append("body",t),d&&s.append("image",d);let a=await r.A.post("posts",s);a.error?p({error:!0,message:a.message}):(p({error:!1,message:a.data.message}),j("/posts/history")),u(!0)}catch(s){console.log(s,"++++"),p({error:!0,message:s.message||"Failed to create post. Please try again."}),u(!0)}finally{f(!1)}}},disabled:b,className:"bg-green flex items-center justify-center ml-auto mb-5 px-6 py-2 rounded transition duration-200 ".concat(b?"opacity-70 cursor-not-allowed":"hover:bg-green-600"),children:b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):"Publish"}),(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{value:e,onChange:e=>s(e.target.value),placeholder:"Title",disabled:b,className:"w-[600px] h-[100px] text-4xl mb-[30px] pb-[20px] ".concat(b?"opacity-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"flex justify-center mb-8",children:v&&(0,i.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover ".concat(b?"opacity-70":""),src:v,alt:"img"})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{value:t,onChange:e=>c(e.target.value),placeholder:"Tell Your Story",disabled:b,className:"w-[600px] mb-80 text-2xl ".concat(b?"opacity-50 cursor-not-allowed":"")})})]})]})}}}]);
//# sourceMappingURL=553.3f6a8a81.chunk.js.map