"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[965],{3786:(e,t,o)=>{o.d(t,{A:()=>n});o(5043);var r=o(184),a=o(4625),s=o(579);const n=function(e){let{handlePostLike:t,isLiked:o,likesCount:n}=e;return(0,s.jsxs)("div",{className:"flex gap-x-1 mt-5 items-center",children:[(0,s.jsx)(a.P.div,{className:"cursor-pointer flex",onClick:t,whileTap:{scale:1.2},animate:{color:o?"white":"#ccc"},transition:{duration:.2},children:o?(0,s.jsx)(r.gb0,{fontSize:"25px"}):(0,s.jsx)(r.U2A,{fontSize:"25px"})}),(0,s.jsx)("div",{children:n})]})}},8117:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(9379),a=o(5043),s=o(237),n=o(7313),l=o(2914),i=o(391),c=o(4257),d=o(8466),p=o(579);const u=function(e){let{handleAction:t}=e;const o="#23272f",r="#ffd369";return(0,p.jsxs)(s.m,{children:[(0,p.jsx)(i.A,{slots:{root:n.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"#222831",marginBottom:"5px",color:r,boxShadow:"0 2px 8px rgba(0,0,0,0.15)","&:hover":{backgroundColor:"#393e46"}}}},children:(0,p.jsx)(d.A,{fontSize:"small",sx:{color:r}})}),(0,p.jsx)(l.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px",backgroundColor:o,boxShadow:"0 2px 12px rgba(0,0,0,0.25)"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,a)=>(0,p.jsx)(c.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px",backgroundColor:o,color:r,"&:hover":{backgroundColor:"#393e46"}},children:e},a)))})]})};var m=o(9778),x=o(3512);const h=function(e){let{avatar:t,username:o,date:s,body:n,likes:l=0,dislikes:i=0,loves:c=0,celebrates:d=0,commentId:h,postId:g,auth_reacted:v}=e;const[f,A]=(0,a.useState)(null),[j,b]=(0,a.useState)({like:l,dislike:i,love:c,celebrate:d}),y=(0,x.A)("(max-width: 768px)"),w={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},N=(0,a.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,a.useEffect)((()=>{b({like:l,dislike:i,love:c,celebrate:d}),A(v?N[v]:null)}),[l,i,c,d,v,N]),(0,p.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[y?null:(0,p.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,p.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,p.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,p.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,p.jsx)("div",{children:(0,p.jsx)("a",{href:"google.com",children:o})}),(0,p.jsxs)("div",{className:"text-[#9198a1]",children:[" ",s]})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,p.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:n}),(0,p.jsxs)("div",{children:[(0,p.jsx)(u,{handleAction:async function(e){const t=f,o=w[e],a=t===e?null:e;A(a);try{await m.A.patch("posts/".concat(g,"/comments/").concat(h,"/reactions"),{type:o}),b((e=>{const s=(0,r.A)({},e);if(t){const e=w[t];s[e]=Math.max(0,s[e]-1)}return a&&(s[o]=parseInt(s[o]||0)+1),s}))}catch(s){A(t),console.error("Error handling reaction:",s)}}}),(0,p.jsx)("div",{className:"flex gap-x-2",children:Object.entries(j).map((e=>{let[t,o]=e;return(0,p.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(f===N[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,p.jsx)("div",{children:N[t]}),(0,p.jsx)("div",{children:o})]},t)}))})]})]})]})]})}},8159:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(8117),a=o(619),s=o(579);const n=function(e){let{comments:t,addComment:o}=e;return t?t&&0!==t.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,s.jsx)(a.A,{onAddComment:o}),t.map((e=>{var t,o,a,n,l,i;return(0,s.jsx)(r.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(o=e.dislikes)&&void 0!==o?o:0,celebrates:null!==(a=e.celebrates)&&void 0!==a?a:0,loves:null!==(n=e.loves)&&void 0!==n?n:0,avatar:(null===(l=e.user)||void 0===l?void 0:l.avatar)||"/default-avatar.png",username:(null===(i=e.user)||void 0===i?void 0:i.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,s.jsx)(a.A,{onAddComment:o}),(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,o)=>{o.d(t,{A:()=>i});var r=o(5043);o.p;var a=o(7291),s=o(7295),n=o(3512),l=o(579);const i=function(e){let{onAddComment:t}=e;const[o,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),p=JSON.parse(localStorage.getItem("user")),u=(0,n.A)("(max-width: 768px)");return(0,l.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[u?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,l.jsx)("img",{src:null===p||void 0===p?void 0:p.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(a.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px",color:"white"},placeholder:"Write a Comment...",variant:"outlined",value:o,onChange:e=>i(e.target.value)}),(0,l.jsx)("div",{className:"flex justify-end mt-2",children:(0,l.jsx)(s.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await t(o),i(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},9553:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var r=o(9379),a=o(5043),s=o(3216),n=o(4268),l=o(4458),i=o(1906),c=o(9007),d=o(9347),p=o(45),u=o(8387),m=o(8610),x=o(4535),h=o(6262),g=o(8206),v=o(2532),f=o(552);function A(e){return(0,f.Ay)("MuiDialogContent",e)}(0,v.A)("MuiDialogContent",["root","dividers"]);function j(e){return(0,f.Ay)("MuiDialogTitle",e)}const b=(0,v.A)("MuiDialogTitle",["root"]);var y=o(579);const w=["className","dividers"],N=(0,x.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})((0,h.A)((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(b.root," + &")]:{paddingTop:0}}}]}}))),C=a.forwardRef((function(e,t){const o=(0,g.b)({props:e,name:"MuiDialogContent"}),{className:a,dividers:s=!1}=o,n=(0,p.A)(o,w),l=(0,r.A)((0,r.A)({},o),{},{dividers:s}),i=(e=>{const{classes:t,dividers:o}=e,r={root:["root",o&&"dividers"]};return(0,m.A)(r,A,t)})(l);return(0,y.jsx)(N,(0,r.A)({className:(0,u.A)(i.root,a),ownerState:l,ref:t},n))}));var k=o(1542),S=o(8828),_=o(6803),M=o(2445);function T(e){return(0,f.Ay)("MuiTypography",e)}(0,v.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const D=["color"],R=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],B={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},P=(0,S.Dg)(),W=(0,x.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],"inherit"!==o.align&&t["align".concat((0,_.A)(o.align))],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})((0,h.A)((e=>{var t;let{theme:o}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(o.typography).filter((e=>{let[t,o]=e;return"inherit"!==t&&o&&"object"===typeof o})).map((e=>{let[t,o]=e;return{props:{variant:t},style:o}})),...Object.entries(o.palette).filter((0,M.A)()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(o.vars||o).palette[t].main}}})),...Object.entries((null===(t=o.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat((0,_.A)(t))},style:{color:(o.vars||o).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),I={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},O=a.forwardRef((function(e,t){const o=(0,g.b)({props:e,name:"MuiTypography"}),{color:a}=o,s=(0,p.A)(o,D),n=!B[a],l=P((0,r.A)((0,r.A)({},s),n&&{color:a})),{align:i="inherit",className:c,component:d,gutterBottom:x=!1,noWrap:h=!1,paragraph:v=!1,variant:f="body1",variantMapping:A=I}=l,j=(0,p.A)(l,R),b=(0,r.A)((0,r.A)({},l),{},{align:i,color:a,className:c,component:d,gutterBottom:x,noWrap:h,paragraph:v,variant:f,variantMapping:A}),w=d||(v?"p":A[f]||I[f])||"span",N=(e=>{const{align:t,gutterBottom:o,noWrap:r,paragraph:a,variant:s,classes:n}=e,l={root:["root",s,"inherit"!==e.align&&"align".concat((0,_.A)(t)),o&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return(0,m.A)(l,T,n)})(b);return(0,y.jsx)(W,(0,r.A)((0,r.A)({as:w,ref:t,className:(0,u.A)(N.root,c)},j),{},{ownerState:b,style:(0,r.A)((0,r.A)({},"inherit"!==i&&{"--Typography-textAlign":i}),j.style)}))}));function L(e){return(0,f.Ay)("MuiDialogContentText",e)}(0,v.A)("MuiDialogContentText",["root"]);const z=["children","className"],E=(0,x.Ay)(O,{shouldForwardProp:e=>(0,k.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),U=a.forwardRef((function(e,t){const o=(0,g.b)({props:e,name:"MuiDialogContentText"}),{children:a,className:s}=o,n=(0,p.A)(o,z),l=(e=>{const{classes:t}=e,o=(0,m.A)({root:["root"]},L,t);return(0,r.A)((0,r.A)({},t),o)})(n);return(0,y.jsx)(E,(0,r.A)((0,r.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:n,className:(0,u.A)(l.root,s)},o),{},{classes:l}))}));var F=o(2563);const H=["className","id"],J=(0,x.Ay)(O,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Y=a.forwardRef((function(e,t){const o=(0,g.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:n}=o,l=(0,p.A)(o,H),i=o,c=(e=>{const{classes:t}=e;return(0,m.A)({root:["root"]},j,t)})(i),{titleId:d=n}=a.useContext(F.A);return(0,y.jsx)(J,(0,r.A)({component:"h2",className:(0,u.A)(c.root,s),ownerState:i,ref:t,variant:"h6",id:null!==n&&void 0!==n?n:d},l))})),Z=e=>{let{title:t,content:o,open:r,onClose:a,onConfirm:s}=e;return(0,y.jsxs)(c.A,{open:r,onClose:a,children:[(0,y.jsx)(Y,{children:t}),(0,y.jsx)(C,{children:(0,y.jsx)(U,{children:o})}),(0,y.jsxs)(d.A,{children:[(0,y.jsx)(i.A,{onClick:a,children:"Cancel"}),(0,y.jsx)(i.A,{onClick:s,autoFocus:!0,children:"Confirm"})]})]})};var q=o(8185),G=o(2716),K=o(9778),Q=o(3786),V=o(8159);const X=function(){var e;const[t,o]=(0,a.useState)(""),[i,c]=(0,a.useState)(""),[d,p]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[g,v]=a.useState(!1),[f,A]=(0,a.useState)(!1),[j,b]=(0,a.useState)(null),w=JSON.parse(localStorage.getItem("user")),[N,C]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),[_,M]=(0,a.useState)([]),{updatePost:T,deletePost:D,allPosts:R}=(0,G.j)(),B=(0,s.zy)(),P=(null===B||void 0===B||null===(e=B.state)||void 0===e||e.from,(0,s.Zp)());function W(){v(!1)}const I=(0,s.g)().id;return(0,a.useEffect)((()=>{!async function(){let e=await K.A.get("posts/".concat(I));console.log("Post data:",e.data),o(e.data.post.title),c(e.data.post.body),C(e.data.post.image_url),M(e.data.comments),b(e.data.post.likes_count),p(!1),e.data.post.liked?A(!0):A(!1)}()}),[I]),d?(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)(q.A,{variant:"rectangular",width:80,height:40,className:"rounded"}),(0,y.jsx)(q.A,{variant:"rectangular",className:"rounded",width:80,height:40})]}),(0,y.jsx)(q.A,{variant:"rectangular",height:50,className:"mb-[50px]"}),(0,y.jsx)(q.A,{variant:"rectangular",height:300})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(Z,{open:g,onClose:W,title:"Confirm Deletion",content:"Are you sure you want to delete this post? Once deleted, it cannot be recovered.",onConfirm:async function(){W();let e=await K.A.delete("posts/".concat(I));e.error?h({error:!0,message:e.message}):(h({error:!1,message:e.data.message}),console.log(R,"}{}{{}"),D(I),setTimeout((()=>{P("/posts/history",{replace:!0}),console.log(R,"_______________")}),1200)),m(!0)}}),(0,y.jsx)(l.A,{message:"Post created successfully",is_open:u,setIs_open:m,status:x}),(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,y.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,y.jsx)("input",{type:"file",className:"hidden",onChange:e=>{C(e.target.files[0]),S(URL.createObjectURL(e.target.files[0]))}})]}),(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)("button",{onClick:function(){v(!0)},className:"bg-red-500 flex ",children:"Delete"}),(0,y.jsx)("button",{onClick:async function(){let e=new FormData;e.append("title",t),e.append("body",i),e.append("_method","PATCH"),(N||k)&&e.append("image",N);let o=await K.A.post("posts/".concat(I),e);if(o.error)h({error:!0,message:o.message});else{const e=o.data.post;T(e),h({error:!1,message:o.data.message})}m(!0)},className:"bg-green flex ",children:"Update"})]}),(0,y.jsx)("div",{children:(0,y.jsx)(n.A,{value:t,onChange:e=>o(e.target.value),placeholder:"Title",className:"w-full h-[100px] text-5xl mb-[30px] pb-[20px] "})}),N&&(0,y.jsx)("div",{className:"flex justify-center mb-8",children:(0,y.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:k||N,alt:"img"})}),(0,y.jsx)("div",{children:(0,y.jsx)(n.A,{value:i,onChange:e=>c(e.target.value),placeholder:"Tell Your Story",className:"w-full text-2xl"})}),(0,y.jsx)(Q.A,{handlePostLike:async function(){A((e=>!e));try{(await K.A.post("posts/".concat(I,"/like"))).data.liked?(A(!0),b((e=>e+1))):(A(!1),b((e=>Math.max(e-1,0))))}catch(e){console.log("Error:",e)}},isLiked:f,likesCount:j}),(0,y.jsx)(V.A,{comments:_,addComment:async function(e){if(e.trim())try{const t=await K.A.post("posts/".concat(I,"/comments"),{body:e}),o=(0,r.A)((0,r.A)({},t.data.comment),{},{user:{id:w.id,username:w.username,avatar:w.avatar}});console.log("New comment added:",o),M((e=>[...e,o]))}catch(t){console.error("Error adding comment:",t)}}})]})]})}}}]);
//# sourceMappingURL=965.4d1abb9d.chunk.js.map