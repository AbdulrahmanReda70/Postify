"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[965],{3786:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var r=a(184),o=a(4625),s=a(579);const n=function(e){let{handlePostLike:t,isLiked:a,likesCount:n}=e;return(0,s.jsxs)("div",{className:"flex gap-x-1 mt-5 items-center",children:[(0,s.jsx)(o.P.div,{className:"cursor-pointer flex",onClick:t,whileTap:{scale:1.2},animate:{color:a?"white":"#ccc"},transition:{duration:.2},children:a?(0,s.jsx)(r.gb0,{fontSize:"25px"}):(0,s.jsx)(r.U2A,{fontSize:"25px"})}),(0,s.jsx)("div",{children:n})]})}},8117:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(9379),o=a(5043),s=a(237),n=a(7313),i=a(2914),l=a(391),c=a(4257),d=a(8466),p=a(579);const u=function(e){let{handleAction:t}=e;return(0,p.jsxs)(s.m,{children:[(0,p.jsx)(l.A,{slots:{root:n.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.05)",marginBottom:"5px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}}}},children:(0,p.jsx)(d.A,{fontSize:"small"})}),(0,p.jsx)(i.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,a)=>(0,p.jsx)(c.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e},a)))})]})};var m=a(9778),x=a(3512);const h=function(e){let{avatar:t,username:a,date:s,body:n,likes:i=0,dislikes:l=0,loves:c=0,celebrates:d=0,commentId:h,postId:g,auth_reacted:v}=e;const[f,A]=(0,o.useState)(null),[j,y]=(0,o.useState)({like:i,dislike:l,love:c,celebrate:d}),b=(0,x.A)("(max-width: 768px)"),w={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},N=(0,o.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,o.useEffect)((()=>{y({like:i,dislike:l,love:c,celebrate:d}),A(v?N[v]:null)}),[i,l,c,d,v,N]),(0,p.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[b?null:(0,p.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,p.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,p.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,p.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,p.jsx)("div",{children:(0,p.jsx)("a",{href:"google.com",children:a})}),(0,p.jsxs)("div",{className:"text-[#9198a1]",children:[" ",s]})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,p.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:n}),(0,p.jsxs)("div",{children:[(0,p.jsx)(u,{handleAction:async function(e){const t=f,a=w[e],o=t===e?null:e;A(o);try{await m.A.patch("posts/".concat(g,"/comments/").concat(h,"/reactions"),{type:a}),y((e=>{const s=(0,r.A)({},e);if(t){const e=w[t];s[e]=Math.max(0,s[e]-1)}return o&&(s[a]=parseInt(s[a]||0)+1),s}))}catch(s){A(t),console.error("Error handling reaction:",s)}}}),(0,p.jsx)("div",{className:"flex gap-x-2",children:Object.entries(j).map((e=>{let[t,a]=e;return(0,p.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(f===N[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,p.jsx)("div",{children:N[t]}),(0,p.jsx)("div",{children:a})]},t)}))})]})]})]})]})}},8159:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(8117),o=a(619),s=a(579);const n=function(e){let{comments:t,addComment:a}=e;return t?t&&0!==t.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,s.jsx)(o.A,{onAddComment:a}),t.map((e=>{var t,a,o,n,i,l;return(0,s.jsx)(r.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(a=e.dislikes)&&void 0!==a?a:0,celebrates:null!==(o=e.celebrates)&&void 0!==o?o:0,loves:null!==(n=e.loves)&&void 0!==n?n:0,avatar:(null===(i=e.user)||void 0===i?void 0:i.avatar)||"/default-avatar.png",username:(null===(l=e.user)||void 0===l?void 0:l.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,s.jsx)(o.A,{onAddComment:a}),(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);a.p;var o=a(7291),s=a(7295),n=a(3512),i=a(579);const l=function(e){let{onAddComment:t}=e;const[a,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),p=JSON.parse(localStorage.getItem("user")),u=(0,n.A)("(max-width: 768px)");return(0,i.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[u?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,i.jsx)("img",{src:null===p||void 0===p?void 0:p.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)(o.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px",color:"white"},placeholder:"Write a Comment...",variant:"outlined",value:a,onChange:e=>l(e.target.value)}),(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)(s.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await t(a),l(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},9553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var r=a(9379),o=a(5043),s=a(3216),n=a(4268),i=a(4458),l=a(1906),c=a(9007),d=a(9347),p=a(45),u=a(8387),m=a(8610),x=a(4535),h=a(6262),g=a(8206),v=a(2532),f=a(552);function A(e){return(0,f.Ay)("MuiDialogContent",e)}(0,v.A)("MuiDialogContent",["root","dividers"]);function j(e){return(0,f.Ay)("MuiDialogTitle",e)}const y=(0,v.A)("MuiDialogTitle",["root"]);var b=a(579);const w=["className","dividers"],N=(0,x.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dividers&&t.dividers]}})((0,h.A)((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(y.root," + &")]:{paddingTop:0}}}]}}))),C=o.forwardRef((function(e,t){const a=(0,g.b)({props:e,name:"MuiDialogContent"}),{className:o,dividers:s=!1}=a,n=(0,p.A)(a,w),i=(0,r.A)((0,r.A)({},a),{},{dividers:s}),l=(e=>{const{classes:t,dividers:a}=e,r={root:["root",a&&"dividers"]};return(0,m.A)(r,A,t)})(i);return(0,b.jsx)(N,(0,r.A)({className:(0,u.A)(l.root,o),ownerState:i,ref:t},n))}));var k=a(1542),S=a(8828),M=a(6803),T=a(2445);function D(e){return(0,f.Ay)("MuiTypography",e)}(0,v.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const R=["color"],B=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],W={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},P=(0,S.Dg)(),I=(0,x.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],"inherit"!==a.align&&t["align".concat((0,M.A)(a.align))],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})((0,h.A)((e=>{var t;let{theme:a}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(a.typography).filter((e=>{let[t,a]=e;return"inherit"!==t&&a&&"object"===typeof a})).map((e=>{let[t,a]=e;return{props:{variant:t},style:a}})),...Object.entries(a.palette).filter((0,T.A)()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(a.vars||a).palette[t].main}}})),...Object.entries((null===(t=a.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat((0,M.A)(t))},style:{color:(a.vars||a).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),O={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},_=o.forwardRef((function(e,t){const a=(0,g.b)({props:e,name:"MuiTypography"}),{color:o}=a,s=(0,p.A)(a,R),n=!W[o],i=P((0,r.A)((0,r.A)({},s),n&&{color:o})),{align:l="inherit",className:c,component:d,gutterBottom:x=!1,noWrap:h=!1,paragraph:v=!1,variant:f="body1",variantMapping:A=O}=i,j=(0,p.A)(i,B),y=(0,r.A)((0,r.A)({},i),{},{align:l,color:o,className:c,component:d,gutterBottom:x,noWrap:h,paragraph:v,variant:f,variantMapping:A}),w=d||(v?"p":A[f]||O[f])||"span",N=(e=>{const{align:t,gutterBottom:a,noWrap:r,paragraph:o,variant:s,classes:n}=e,i={root:["root",s,"inherit"!==e.align&&"align".concat((0,M.A)(t)),a&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return(0,m.A)(i,D,n)})(y);return(0,b.jsx)(I,(0,r.A)((0,r.A)({as:w,ref:t,className:(0,u.A)(N.root,c)},j),{},{ownerState:y,style:(0,r.A)((0,r.A)({},"inherit"!==l&&{"--Typography-textAlign":l}),j.style)}))}));function L(e){return(0,f.Ay)("MuiDialogContentText",e)}(0,v.A)("MuiDialogContentText",["root"]);const z=["children","className"],E=(0,x.Ay)(_,{shouldForwardProp:e=>(0,k.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),U=o.forwardRef((function(e,t){const a=(0,g.b)({props:e,name:"MuiDialogContentText"}),{children:o,className:s}=a,n=(0,p.A)(a,z),i=(e=>{const{classes:t}=e,a=(0,m.A)({root:["root"]},L,t);return(0,r.A)((0,r.A)({},t),a)})(n);return(0,b.jsx)(E,(0,r.A)((0,r.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:n,className:(0,u.A)(i.root,s)},a),{},{classes:i}))}));var F=a(2563);const H=["className","id"],J=(0,x.Ay)(_,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Y=o.forwardRef((function(e,t){const a=(0,g.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:n}=a,i=(0,p.A)(a,H),l=a,c=(e=>{const{classes:t}=e;return(0,m.A)({root:["root"]},j,t)})(l),{titleId:d=n}=o.useContext(F.A);return(0,b.jsx)(J,(0,r.A)({component:"h2",className:(0,u.A)(c.root,s),ownerState:l,ref:t,variant:"h6",id:null!==n&&void 0!==n?n:d},i))})),Z=e=>{let{title:t,content:a,open:r,onClose:o,onConfirm:s}=e;return(0,b.jsxs)(c.A,{open:r,onClose:o,children:[(0,b.jsx)(Y,{children:t}),(0,b.jsx)(C,{children:(0,b.jsx)(U,{children:a})}),(0,b.jsxs)(d.A,{children:[(0,b.jsx)(l.A,{onClick:o,children:"Cancel"}),(0,b.jsx)(l.A,{onClick:s,autoFocus:!0,children:"Confirm"})]})]})};var q=a(8185),G=a(2716),K=a(9778),Q=a(3786),V=a(8159);const X=function(){var e;const[t,a]=(0,o.useState)(""),[l,c]=(0,o.useState)(""),[d,p]=(0,o.useState)(!0),[u,m]=(0,o.useState)(!1),[x,h]=(0,o.useState)(null),[g,v]=o.useState(!1),[f,A]=(0,o.useState)(!1),[j,y]=(0,o.useState)(null),w=JSON.parse(localStorage.getItem("user")),[N,C]=(0,o.useState)(null),[k,S]=(0,o.useState)(null),[M,T]=(0,o.useState)([]),{updatePost:D,allPosts:R}=(0,G.j)(),B=(0,s.zy)(),W=(null===B||void 0===B||null===(e=B.state)||void 0===e?void 0:e.from)||"/",P=(0,s.Zp)();function I(){v(!1)}const O=(0,s.g)().id;return(0,o.useEffect)((()=>{!async function(){let e=await K.A.get("posts/".concat(O));console.log("Post data:",e.data),a(e.data.post.title),c(e.data.post.body),C(e.data.post.image_url),T(e.data.comments),y(e.data.post.likes_count),p(!1),e.data.post.liked?A(!0):A(!1)}()}),[O]),d?(0,b.jsxs)("div",{className:"container-c",children:[(0,b.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,b.jsx)(q.A,{variant:"rectangular",width:80,height:40,className:"rounded"}),(0,b.jsx)(q.A,{variant:"rectangular",className:"rounded",width:80,height:40})]}),(0,b.jsx)(q.A,{variant:"rectangular",height:50,className:"mb-[50px]"}),(0,b.jsx)(q.A,{variant:"rectangular",height:300})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(Z,{open:g,onClose:I,title:"Confirm Deletion",content:"Are you sure you want to delete this post? Once deleted, it cannot be recovered.",onConfirm:async function(){I();let e=await K.A.delete("posts/".concat(O));e.error?h({error:!0,message:e.message}):(h({error:!1,message:e.data.message}),setTimeout((()=>{P(W,{replace:!0})}),1200)),m(!0)}}),(0,b.jsx)(i.A,{message:"Post created successfully",is_open:u,setIs_open:m,status:x}),(0,b.jsxs)("div",{className:"container-c",children:[(0,b.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,b.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,b.jsx)("input",{type:"file",className:"hidden",onChange:e=>{C(e.target.files[0]),S(URL.createObjectURL(e.target.files[0]))}})]}),(0,b.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,b.jsx)("button",{onClick:function(){v(!0)},className:"bg-red-500 flex ",children:"Delete"}),(0,b.jsx)("button",{onClick:async function(){let e=new FormData;e.append("title",t),e.append("body",l),e.append("_method","PATCH"),(N||k)&&e.append("image",N);let a=await K.A.post("posts/".concat(O),e);if(a.error)h({error:!0,message:a.message});else{const e=a.data.post;D(e),h({error:!1,message:a.data.message})}m(!0)},className:"bg-green flex ",children:"Update"})]}),(0,b.jsx)("div",{children:(0,b.jsx)(n.A,{value:t,onChange:e=>a(e.target.value),placeholder:"Title",className:"w-full h-[100px] text-5xl mb-[30px] pb-[20px] "})}),N&&(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:k||N,alt:"img"})}),(0,b.jsx)("div",{children:(0,b.jsx)(n.A,{value:l,onChange:e=>c(e.target.value),placeholder:"Tell Your Story",className:"w-full text-2xl"})}),(0,b.jsx)(Q.A,{handlePostLike:async function(){A((e=>!e));try{(await K.A.post("posts/".concat(O,"/like"))).data.liked?(A(!0),y((e=>e+1))):(A(!1),y((e=>Math.max(e-1,0))))}catch(e){console.log("Error:",e)}},isLiked:f,likesCount:j}),(0,b.jsx)(V.A,{comments:M,addComment:async function(e){if(e.trim())try{const t=await K.A.post("posts/".concat(O,"/comments"),{body:e}),a=(0,r.A)((0,r.A)({},t.data.comment),{},{user:{id:w.id,username:w.username,avatar:w.avatar}});console.log("New comment added:",a),T((e=>[...e,a]))}catch(t){console.error("Error adding comment:",t)}}})]})]})}}}]);
//# sourceMappingURL=965.577d4e4b.chunk.js.map