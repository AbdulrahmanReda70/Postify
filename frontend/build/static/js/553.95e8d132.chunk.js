"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[553],{8117:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(9379),l=s(5043),r=s(237),n=s(7313),o=s(2914),i=s(391),c=s(4257),d=s(8466),x=s(579);const m=function(e){let{handleAction:t}=e;return(0,x.jsxs)(r.m,{children:[(0,x.jsx)(i.A,{slots:{root:n.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.05)",marginBottom:"5px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}}}},children:(0,x.jsx)(d.A,{fontSize:"small"})}),(0,x.jsx)(o.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,s)=>(0,x.jsx)(c.A,{onClick:()=>t(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e},s)))})]})};var u=s(9778),h=s(3512);const p=function(e){let{avatar:t,username:s,date:r,body:n,likes:o=0,dislikes:i=0,loves:c=0,celebrates:d=0,commentId:p,postId:v,auth_reacted:j}=e;const[g,b]=(0,l.useState)(null),[f,y]=(0,l.useState)({like:o,dislike:i,love:c,celebrate:d}),w=(0,h.A)("(max-width: 768px)"),N={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},k=(0,l.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,l.useEffect)((()=>{y({like:o,dislike:i,love:c,celebrate:d}),b(j?k[j]:null)}),[o,i,c,d,j,k]),(0,x.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[w?null:(0,x.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,x.jsx)("img",{src:t,alt:"avatar",className:"w-full h-full object-cover"})}),(0,x.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,x.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"google.com",children:s})}),(0,x.jsxs)("div",{className:"text-[#9198a1]",children:[" ",r]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,x.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:n}),(0,x.jsxs)("div",{children:[(0,x.jsx)(m,{handleAction:async function(e){const t=g,s=N[e],l=t===e?null:e;b(l);try{await u.A.patch("posts/".concat(v,"/comments/").concat(p,"/reactions"),{type:s}),y((e=>{const r=(0,a.A)({},e);if(t){const e=N[t];r[e]=Math.max(0,r[e]-1)}return l&&(r[s]=parseInt(r[s]||0)+1),r}))}catch(r){b(t),console.error("Error handling reaction:",r)}}}),(0,x.jsx)("div",{className:"flex gap-x-2",children:Object.entries(f).map((e=>{let[t,s]=e;return(0,x.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(g===k[t]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,x.jsx)("div",{children:k[t]}),(0,x.jsx)("div",{children:s})]},t)}))})]})]})]})]})}},8159:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(8117),l=s(619),r=s(579);const n=function(e){let{comments:t,addComment:s}=e;return t?t&&0!==t.length?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,r.jsx)(l.A,{onAddComment:s}),t.map((e=>{var t,s,l,n,o,i;return(0,r.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(t=e.likes)&&void 0!==t?t:0,dislikes:null!==(s=e.dislikes)&&void 0!==s?s:0,celebrates:null!==(l=e.celebrates)&&void 0!==l?l:0,loves:null!==(n=e.loves)&&void 0!==n?n:0,avatar:(null===(o=e.user)||void 0===o?void 0:o.avatar)||"/default-avatar.png",username:(null===(i=e.user)||void 0===i?void 0:i.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,r.jsx)(l.A,{onAddComment:s}),(0,r.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043);s.p;var l=s(7291),r=s(7295),n=s(3512),o=s(579);const i=function(e){let{onAddComment:t}=e;const[s,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),x=JSON.parse(localStorage.getItem("user")),m=(0,n.A)("(max-width: 768px)");return(0,o.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[m?null:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,o.jsx)("img",{src:null===x||void 0===x?void 0:x.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(l.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px",color:"white"},placeholder:"Write a Comment...",variant:"outlined",value:s,onChange:e=>i(e.target.value)}),(0,o.jsx)("div",{className:"flex justify-end mt-2",children:(0,o.jsx)(r.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){d(!0),await t(s),i(""),d(!1)},children:c?"Submitting...":"Comment"})})]})]})}},4477:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(5043),l=s(4268),r=s(9778),n=s(4458),o=(s(2716),s(3216)),i=(s(619),s(8117),s(8159),s(579));const c=function(){const[e,t]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[d,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[g,b]=(0,a.useState)(!1),f=(0,o.Zp)();return(0,i.jsxs)("div",{children:[(0,i.jsx)(n.A,{is_open:m,setIs_open:u,status:h}),(0,i.jsxs)("div",{className:"container-c",children:[(0,i.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300 ".concat(g?"opacity-50 cursor-not-allowed":""),children:[(0,i.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,i.jsx)("input",{type:"file",className:"hidden",disabled:g,onChange:e=>{x(e.target.files[0]),j(URL.createObjectURL(e.target.files[0]))}})]}),(0,i.jsx)("button",{onClick:async function(){if(!g){b(!0);try{const t=new FormData;t.append("title",e),t.append("body",s),d&&t.append("image",d);let a=await r.A.post("posts",t);a.error?p({error:!0,message:a.message}):(p({error:!1,message:a.data.message}),f("/posts/history")),u(!0)}catch(t){p({error:!0,message:"Failed to create post. Please try again."}),u(!0)}finally{b(!1)}}},disabled:g,className:"bg-green flex items-center justify-center ml-auto mb-5 px-6 py-2 rounded transition duration-200 ".concat(g?"opacity-70 cursor-not-allowed":"hover:bg-green-600"),children:g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publishing..."]}):"Publish"}),(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{value:e,onChange:e=>t(e.target.value),placeholder:"Title",disabled:g,className:"w-[600px] h-[100px] text-4xl mb-[30px] pb-[20px] ".concat(g?"opacity-50 cursor-not-allowed":"")})}),(0,i.jsx)("div",{className:"flex justify-center mb-8",children:v&&(0,i.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover ".concat(g?"opacity-70":""),src:v,alt:"img"})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{value:s,onChange:e=>c(e.target.value),placeholder:"Tell Your Story",disabled:g,className:"w-[600px] mb-80 text-2xl ".concat(g?"opacity-50 cursor-not-allowed":"")})})]})]})}}}]);
//# sourceMappingURL=553.95e8d132.chunk.js.map