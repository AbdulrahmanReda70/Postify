"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[875],{875:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var a=r(5043),t=r(9778),n=r(1906),l=r(7561),c=r(5302),o=r(5534),i=r(9347),u=r(2851),d=r(618),m=r(4458),x=r(579);function p(e){let{modalOpen:s,setModalOpen:r,from:a,setUser:t}=e;return(0,x.jsx)(x.Fragment,{children:function(){switch(a){case"username":return h(s,r,"username",t);case"email":return h(s,r,"email",t);case"password":return h(s,r,"password",t);default:return null}}()})}function h(e,s,r,p){const[h,f]=a.useState(!1),[g,j]=a.useState(!1);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.A,{is_open:h,setIs_open:f,status:g}),(0,x.jsx)(a.Fragment,{children:(0,x.jsx)(o.A,{open:e,onClose:()=>s(!1),children:(0,x.jsx)(i.A,{children:(0,x.jsx)("form",{onSubmit:e=>{e.preventDefault();const a=e.target[0].value,n=e.target[1].value;!async function(e,s,r){if("password"===e&&s!==r)return j({error:!0,message:"Passwords should match"}),f(!0),null;const a=await t.A.patch("user",{[e]:s});a.error?j({error:!0,message:a.message}):(j({error:!1,message:a.data.message}),console.log(a),(0,d.$K)(a.data.user),p(a.data.user)),f(!0)}(r,a,n),s(!1)},children:(0,x.jsxs)(u.A,{spacing:2,children:[(0,x.jsxs)(l.A,{children:[(0,x.jsx)(c.A,{className:"h-[40px] p-5 pl-1",autoFocus:!0,required:!0,placeholder:"Enter ".concat(r.toLowerCase())}),"password"===r&&(0,x.jsx)(c.A,{className:"h-[40px] p-3 mt-5 pl-1",autoFocus:!0,required:!0,placeholder:"Confirm Password"})]}),(0,x.jsx)(n.A,{type:"submit",children:"Update"})]})})})})})]})}var f=r(4268),g=r(3216);const j=function(){const[e,s]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[l,c]=(0,a.useState)({}),[o,i]=(0,a.useState)(""),u=(0,g.Zp)(),m=(0,d.ug)();async function h(e){n(e),s(!0)}m||(window.location.href="/signin"),console.log(l,"user");const j=(0,a.useCallback)(((e,s)=>{let r;return function(){for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];clearTimeout(r),r=setTimeout((()=>{e(...t)}),s)}})((async e=>{const s=await t.A.patch("user",{description:e});s.error?console.error("Failed to update description:",s.message):console.log("Description updated successfully:",s.data)}),1e3),[]);return(0,a.useEffect)((()=>{console.log(m,"user"),c(m),null!==m&&void 0!==m&&m.description&&i(null===m||void 0===m?void 0:m.description)}),[]),m||u("/signin",{replace:!0}),(0,x.jsxs)("div",{className:"container-c",children:[(0,x.jsx)(p,{setUser:c,modalOpen:e,setModalOpen:s,from:r}),(0,x.jsxs)("div",{className:"flex items-center gap-2 mt-10 mb-4",children:[(0,x.jsx)("img",{src:l.avatar,alt:"",className:"w-12"}),(0,x.jsx)("h2",{className:"text-4xl",children:l.username})]}),(0,x.jsx)("div",{children:(0,x.jsx)(f.A,{value:o,maxLength:200,onChange:e=>{const s=e.target.value;i(s),j(s)},placeholder:"Tell the world about yourself",className:"max-w-[600px] h-[100px] max-h-[300px] text-xl mt-5 mb-[80px] pb-[20px] "})}),(0,x.jsxs)("div",{className:"flex flex-col gap-5 ",children:[(0,x.jsxs)("div",{onClick:()=>h("username"),className:"flex justify-between items-center cursor-pointer",children:[(0,x.jsx)("div",{className:"text-xl",children:"Username"}),(0,x.jsxs)("div",{className:"text-[#8f8e8e]",children:[" ",l.username]})]}),(0,x.jsxs)("div",{onClick:()=>h("email"),className:"flex justify-between items-center cursor-pointer",children:[(0,x.jsx)("div",{className:"text-xl",children:"Email"}),(0,x.jsx)("div",{className:"text-[#8f8e8e]",children:l.email})]}),(0,x.jsxs)("div",{onClick:()=>h("password"),className:"flex justify-between items-center cursor-pointer",children:[(0,x.jsx)("div",{className:"text-xl",children:"Password"}),(0,x.jsx)("div",{className:"text-[#8f8e8e]",children:"*****"})]}),(0,x.jsx)("div",{onClick:async function(){if(window.confirm("Are you sure you want to delete your account?\u26a0\ufe0f"))try{const e=await t.A.delete("user");e.error?(console.error("Failed to delete account:",e.message),alert("Failed to delete account. Please try again.")):(console.log("Account deleted successfully:",e.message),localStorage.clear(),u("/signin",{replace:!0}))}catch(e){console.error("An error occurred:",e),alert("An error occurred while deleting your account. Please try again.")}},className:"text-red-700 mt-5 cursor-pointer w-fit",children:"Delete Account"})]})]})}}}]);
//# sourceMappingURL=875.70b94f57.chunk.js.map