"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[553],{8117:(e,s,t)=>{t.d(s,{A:()=>p});var a=t(9379),l=t(5043),n=t(237),r=t(7313),i=t(2914),o=t(391),d=t(4257),c=t(8466),x=t(579);const m=function(e){let{handleAction:s}=e;return(0,x.jsxs)(n.m,{children:[(0,x.jsx)(o.A,{slots:{root:r.Ay},slotProps:{root:{variant:"soft",color:"primary",size:"sm",sx:{borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.05)",marginBottom:"5px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}}}},children:(0,x.jsx)(c.A,{fontSize:"small"})}),(0,x.jsx)(i.A,{sx:{display:"flex",flexDirection:"row",padding:"5px",gap:"4px"},children:["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83c\udf89"].map(((e,t)=>(0,x.jsx)(d.A,{onClick:()=>s(e),sx:{fontSize:"13px",borderRadius:"8px",padding:"5px 10px","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e},t)))})]})};var u=t(9778),h=t(3512);const p=function(e){let{avatar:s,username:t,date:n,body:r,likes:i=0,dislikes:o=0,loves:d=0,celebrates:c=0,commentId:p,postId:v,auth_reacted:j}=e;const[b,f]=(0,l.useState)(null),[g,y]=(0,l.useState)({like:i,dislike:o,love:d,celebrate:c}),N=(0,h.A)("(max-width: 768px)"),k={"\ud83d\udc4d":"like","\ud83d\udc4e":"dislike","\u2764\ufe0f":"love","\ud83c\udf89":"celebrate"},A=(0,l.useMemo)((()=>({like:"\ud83d\udc4d",dislike:"\ud83d\udc4e",love:"\u2764\ufe0f",celebrate:"\ud83c\udf89"})),[]);return(0,l.useEffect)((()=>{y({like:i,dislike:o,love:d,celebrate:c}),f(j?A[j]:null)}),[i,o,d,c,j,A]),(0,x.jsxs)("div",{className:"flex gap-x-2 mb-4 justify-center",children:[N?null:(0,x.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,x.jsx)("img",{src:s,alt:"avatar",className:"w-full h-full object-cover"})}),(0,x.jsxs)("div",{className:"min-h-[150px] w-[500px] rounded outline outline-1 outline-[#3d424e]",children:[(0,x.jsxs)("div",{className:"h-10 bg-[#151923] flex gap-x-2 items-center text-[13px] pl-[10px] border-b border-[#3d424e] border-1",children:[(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"google.com",children:t})}),(0,x.jsxs)("div",{className:"text-[#9198a1]",children:[" ",n]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between p-[10px] gap-y-7 flex-1",children:[(0,x.jsx)("div",{className:"text-[14px] whitespace-pre-wrap",children:r}),(0,x.jsxs)("div",{children:[(0,x.jsx)(m,{handleAction:async function(e){const s=b,t=k[e],l=s===e?null:e;f(l);try{await u.A.patch("posts/".concat(v,"/comments/").concat(p,"/reactions"),{type:t}),y((e=>{const n=(0,a.A)({},e);if(s){const e=k[s];n[e]=Math.max(0,n[e]-1)}return l&&(n[t]=parseInt(n[t]||0)+1),n}))}catch(n){f(s),console.error("Error handling reaction:",n)}}}),(0,x.jsx)("div",{className:"flex gap-x-2",children:Object.entries(g).map((e=>{let[s,t]=e;return(0,x.jsxs)("div",{className:"flex items-center justify-evenly text-xs w-[50px] h-[25px] border border-[#3d424e] rounded-full ".concat(b===A[s]?"bg-[#3d424e] text-white":"bg-[#151923] text-[#9198a1]"),children:[(0,x.jsx)("div",{children:A[s]}),(0,x.jsx)("div",{children:t})]},s)}))})]})]})]})]})}},8159:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(8117),l=t(619),n=t(579);const r=function(e){let{comments:s,addComment:t}=e;return s?s&&0!==s.length?(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(l.A,{onAddComment:t}),s.map((e=>{var s,t,l,r,i,o;return(0,n.jsx)(a.A,{commentId:e.id,postId:e.post_id,date:e.created_at,body:e.body,likes:null!==(s=e.likes)&&void 0!==s?s:0,dislikes:null!==(t=e.dislikes)&&void 0!==t?t:0,celebrates:null!==(l=e.celebrates)&&void 0!==l?l:0,loves:null!==(r=e.loves)&&void 0!==r?r:0,avatar:(null===(i=e.user)||void 0===i?void 0:i.avatar)||"/default-avatar.png",username:(null===(o=e.user)||void 0===o?void 0:o.username)||"Anonymous",auth_reacted:e.auth_reacted},"comment-".concat(e.id))}))]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-5 mt-[80px]",children:"Comments"}),(0,n.jsx)(l.A,{onAddComment:t}),(0,n.jsx)("div",{className:"text-center text-gray-500",children:"No comments yet. Be the first to comment!"})]}):(0,n.jsx)("div",{className:"text-center text-gray-500",children:"Loading comments..."})}},619:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(5043);t.p;var l=t(7291),n=t(7295),r=t(3512),i=t(579);const o=function(e){let{onAddComment:s}=e;const[t,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),x=JSON.parse(localStorage.getItem("user")),m=(0,r.A)("(max-width: 768px)");return(0,i.jsxs)("div",{className:"flex gap-x-2 mb-11",children:[m?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0",children:(0,i.jsx)("img",{src:null===x||void 0===x?void 0:x.avatar,alt:"",className:"w-full h-full object-cover"})})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)(l.A,{sx:{minHeight:"200px",backgroundColor:"unset",padding:"15px"},placeholder:"Write a Comment...",variant:"outlined",value:t,onChange:e=>o(e.target.value)}),(0,i.jsx)("div",{className:"flex justify-end mt-2",children:(0,i.jsx)(n.A,{variant:"solid",color:"success",sx:{px:2,fontWeight:400,textTransform:"none",borderRadius:"6px"},onClick:async function(){c(!0),await s(t),o(""),c(!1)},children:d?"Submitting...":"Comment"})})]})]})}},4477:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(5043),l=t(4268),n=t(9778),r=t(4458),i=(t(2716),t(3216)),o=(t(619),t(8117),t(8159),t(579));const d=function(){const[e,s]=(0,a.useState)(""),[t,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),b=(0,i.Zp)();return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.A,{is_open:m,setIs_open:u,status:h}),(0,o.jsxs)("div",{className:"container-c",children:[(0,o.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,o.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,o.jsx)("input",{type:"file",className:"hidden",onChange:e=>{x(e.target.files[0]),j(URL.createObjectURL(e.target.files[0]))}})]}),(0,o.jsx)("button",{onClick:async function(){const s=new FormData;s.append("title",e),s.append("body",t),c&&s.append("image",c);let a=await n.A.post("posts",s);a.error?p({error:!0,message:a.message}):(p({error:!1,message:a.data.message}),b("/posts/history")),u(!0)},className:"bg-green flex ml-auto mb-5",children:"Publish"}),(0,o.jsx)("div",{children:(0,o.jsx)(l.A,{value:e,onChange:e=>s(e.target.value),placeholder:"Title",className:"w-[600px] h-[100px] text-4xl mb-[30px] pb-[20px] "})}),(0,o.jsx)("div",{className:"flex justify-center mb-8",children:v&&(0,o.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:v,alt:"img"})}),(0,o.jsx)("div",{children:(0,o.jsx)(l.A,{value:t,onChange:e=>d(e.target.value),placeholder:"Tell Your Story",className:"w-[600px] mb-80 text-2xl"})})]})]})}}}]);
//# sourceMappingURL=553.c57c1f50.chunk.js.map